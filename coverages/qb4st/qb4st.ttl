# prefix for for a "spatio-temporal Datacube" extension to qb
@prefix qb4st: <http://resources.opengeospatial.org/def/ontology/qb4st/> .

# a canonical spatial concept ontology (update to SDW output )
@prefix so: <http://geosemweb.net/sdwgeo#> .

# a canonical time concept ontology (update to SDW output )
@prefix time: <http://resources.opengeospatial.org/def/ontology/time/> .


@prefix rdf:            <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:           <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:            <http://www.w3.org/2002/07/owl#> .
@prefix xsd:            <http://www.w3.org/2001/XMLSchema#> .
@prefix skos:           <http://www.w3.org/2004/02/skos/core#> .
@prefix qb:             <http://purl.org/linked-data/cube#> .
@prefix dcterms:        <http://purl.org/dc/terms/> .

#########################
#
# Data structure definitions allow metadata about a data set to be declared, and reasoned over to discover, for example, overlapping spatial ranges 
#
#########################

<http://resources.opengeospatial.org/def/ontology/qb4st> a owl:Ontology;
	dcterms:creator "Rob Atkinson";
	rdfs:label "QB4ST: Spatial Temporal Datacube Extensions"@en;
	rdfs:comment "QB4ST defines a minimal set of definitions for spatio-temporal properties of RDF Datacube elements and base abstract classes to allow disocvery of spatio-temporal aspects of a dataset described using RDF datacube"@en;
	
.

qb4st:SpatialDSD a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:DataStructureDefinition ;
	rdfs:label "Spatial Data Structure Definition"@en ;
	rdfs:comment "Specifies a data set includes one or more spatial properties, either in its organising dimension or its observed values"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:component ;
        owl:someValuesFrom qb4st:SpatialComponentSpecification ;
     ]  ;
.

qb4st:SpatioTemporalDSD a rdfs:Class, owl:Class;
	rdfs:subClassOf qb4st:SpatialDSD ;
	rdfs:label "Spatial Data Structure Definition"@en ;
	rdfs:comment "Specifies a data set includes one or more spatial properties, either in its organising dimension or its observed values"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:component ;
        owl:someValuesFrom qb4st:TemporalComponentSpecification ;
     ]  ;
.

qb4st:SpatialComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Component"@en ;
	rdfs:comment "A generalised spatial property - allows properties like CRS, bounds, accuracy and precision to be define for a spatial dimension or measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:componentProperty;
        owl:someValuesFrom qb4st:SpatialProperty ;
     ]  ;
.

qb4st:TemporalComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Component"@en ;
	rdfs:comment "A generalised spatial property - allows properties like CRS, bounds, accuracy and precision to be define for a spatial dimension or measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:componentProperty;
        owl:someValuesFrom qb4st:TemporalProperty ;
     ]  ;
.

# many not need these - unless we want to ask if a dataset has a spatial dimension vs a measure?
qb4st:SpatialDimensionComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Dimension Component"@en ;
	rdfs:comment "Allows identification of datasets organised using discrete spatial dimensions"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:dimension;
        owl:someValuesFrom qb4st:SpatialDimension ;
     ]  ;
.

qb4st:SpatialMeasureComponentSpecification a rdfs:Class, owl:Class;
	rdfs:subClassOf qb:ComponentSpecification ;
	rdfs:label "Spatial Measure Component"@en ;
	rdfs:comment "Allows identification of datasets containing spatial location measures"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:measure;
        owl:someValuesFrom qb4st:SpatialMeasure ;
     ]  ;
.

########################
#
# attributes of spatial components
#
######################
qb4st:refsystem a rdfs:Property;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification; 
	rdfs:label "Reference system specification for a QB component"@en;
	rdfs:comment ""@en
	.


qb4st:srs a rdfs:Property, owl:ObjectProperty;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:subPropertyOf qb4st:srs ;	
	rdfs:label "Spatial Reference System declaration"@en;
	rdfs:comment ""@en
	.
	
qb4st:crs a rdfs:Property, owl:ObjectProperty;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:subPropertyOf qb4st:srs ;	
	rdfs:range so:CRS;
	rdfs:label "CRS binding for a component specification or a property"@en;
	rdfs:comment "Allows declaration of a CRS for any spatial propert -- do we want to leave domain open? Leaves it to a general spatial ontology to handle if CRS is a canonical URI set , or dereferences to anything specific)"@en
	.

qb4st:crsaxis a rdfs:Property;
	# meta:rangeIncludes qb4st:SpatialProperty, qb4st:SpatialComponentSpecification;
	rdfs:subPropertyOf qb4st:srs ;	
	rdfs:label "CRS axis element name"@en;
	rdfs:comment "Names a specific axis of the CRS"@en
	.


qb4st:coordGranularity a rdfs:Property;
	rdfs:domain qb4st:coordDimension ;
	rdfs:range qb4st:AnyNumber ;
	rdfs:label "Dimensions are indexes, a coordDimension specifies the granular partitioning of the coordinate space represented."@en
	.

qb4st:AnyNumber a rdfs:Class, owl:Class ;
      rdfs:label "Any number"^^xsd:string ;      
      rdfs:comment "A datatype that is the union of numeric xsd data types. equivalent to the xsd specification that uses an xsd:union of memberTypes='xsd:decimal xsd:double xsd:float xsd:integer'."@en ;
      owl:equivalentClass [ 
		rdf:type  rdfs:Datatype;
		owl:unionOf (xsd:float xsd:decimal xsd:integer xsd:double) 
      ]
.
	
##################
#
# Spatial properties - things that can be embedded in data to define its spatial location
#
##################
qb4st:SpatialProperty a rdfs:Class, owl:Class;
	rdfs:subClassOf rdfs:Property, qb:ComponentProperty ;
	rdfs:label "Abstract Spatial Property"@en ;
	rdfs:comment "A generalised spatial property - defines how properties like CRS, accuracy and precision can be applied to any spatial value in a dimension of measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:concept ;
        owl:someValuesFrom so:SpatialThing ;
     ]  ;
	 . 

qb4st:TemporalProperty a rdfs:Class, owl:Class;
	rdfs:subClassOf rdfs:Property, qb:ComponentProperty ;
	rdfs:label "Abstract Spatial Property"@en ;
	rdfs:comment "A generalised spatial property - defines how properties like CRS, accuracy and precision can be applied to any spatial value in a dimension of measure"@en ;
	rdfs:subClassOf [
        a owl:Restriction ;
        owl:onProperty qb:concept ;
        owl:someValuesFrom so:SpatialThing ;
     ]  ;
	 . 
	 
qb4st:SpatialDimension a rdfs:Class, owl:Class; 
	rdfs:label "Spatial Dimension"@en ;
	rdfs:subPropertyOf qb:DimensionProperty, qb4st:SpatialProperty;
	rdfs:comment "A generalised spatial dimension - defines common usage of a concept for a spatial dimension, and hence potential transformability between instances."@en
	. 
	

qb4st:CoordDimension a rdfs:Class, owl:Class;
	rdfs:subPropertyOf qb4st:SpatialDimension;
	rdfs:label "Abstract Numerical Coordinate Dimension"@en ;
	rdfs:comment "A numeric coordinate dimension. NB - this is a dimension - an index with spatial semantics whose value represents . If an actual location is being measured, use a coordMeasure"@en;
	rdfs:range  qb4st:AnyNumber 

.

qb4st:SpatialMeasure a  rdfs:Class, owl:Class;
	rdfs:subPropertyOf qb:MeasureProperty;
	rdfs:label "abstract measure of spatial location"@en
	.

qb4st:PositionMeasure a  rdfs:Class, owl:Class ;
	rdfs:subPropertyOf qb:SpatialMeasure ;
	rdfs:range  so:Point ;
	rdfs:label "a measure of location as a Point (i.e. a complex spatial data type)"
	.
